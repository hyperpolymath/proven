// Generated by ReScript, PLEASE EDIT WITH CARE


function statusFromInt(code) {
  switch (code) {
    case -10 :
        return "ErrAllocationFailed";
    case -9 :
        return "ErrEncodingError";
    case -8 :
        return "ErrOutOfBounds";
    case -7 :
        return "ErrValidationFailed";
    case -6 :
        return "ErrParseFailure";
    case -5 :
        return "ErrDivisionByZero";
    case -4 :
        return "ErrUnderflow";
    case -3 :
        return "ErrOverflow";
    case -2 :
        return "ErrInvalidArgument";
    case -1 :
        return "ErrNullPointer";
    case 0 :
        return "Ok";
    default:
      return "ErrNotImplemented";
  }
}

var wasmInstance = {
  contents: undefined
};

async function init(wasmPath) {
  var match = wasmInstance.contents;
  if (match !== undefined) {
    return {
            TAG: "Ok",
            _0: undefined
          };
  }
  try {
    var response = fetch(wasmPath);
    var importObject = {};
    var result = await WebAssembly.instantiateStreaming(response, importObject);
    wasmInstance.contents = result.instance;
    var initResult = result.instance.exports.proven_init();
    if (initResult === 0) {
      return {
              TAG: "Ok",
              _0: undefined
            };
    } else {
      return {
              TAG: "Error",
              _0: "Failed to initialize Proven runtime"
            };
    }
  }
  catch (exn){
    return {
            TAG: "Error",
            _0: "Failed to load WASM module"
          };
  }
}

function isInitialized() {
  var instance = wasmInstance.contents;
  if (instance !== undefined) {
    return instance.exports.proven_is_initialized();
  } else {
    return false;
  }
}

function deinit() {
  var instance = wasmInstance.contents;
  if (instance !== undefined) {
    instance.exports.proven_deinit();
    wasmInstance.contents = undefined;
    return ;
  }
  
}

function getExports() {
  var instance = wasmInstance.contents;
  if (instance !== undefined) {
    return instance.exports;
  }
  
}

function version() {
  var $$exports = getExports();
  if ($$exports === undefined) {
    return ;
  }
  var major = $$exports.proven_version_major();
  var minor = $$exports.proven_version_minor();
  var patch = $$exports.proven_version_patch();
  return String(major) + "." + String(minor) + "." + String(patch);
}

export {
  statusFromInt ,
  wasmInstance ,
  init ,
  isInitialized ,
  deinit ,
  getExports ,
  version ,
}
/* No side effect */
